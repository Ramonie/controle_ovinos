<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <header style="display:flex; justify-content:space-between; padding:10px; background:#f5f5f5;">
  <h2>üêë Sistema de Ovinos</h2>

  {% if user.is_authenticated %}
  <div>
    <span>Ol√°, {{ user.username }}!</span>
    <form action="{% url 'logout' %}" method="post" style="display:inline;">
      {% csrf_token %}
      <button type="submit" style="margin-left:10px; background:#dc3545; color:white; padding:5px 12px; border:none; border-radius:4px; cursor:pointer;">
        Sair
      </button>
    </form>
    {% else %}
    <a href="{% url 'login' %}" class="btn btn-primary">Login</a>
  </div>
  {% endif %}
</header>


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container my-3">
    <div class="d-flex justify-content-between align-items-center mb-4">
    
        
        
    

    <!-- Formul√°rio de busca -->
    <form method="GET" class="mb-4 d-flex">
        <input type="text" name="q" class="form-control me-2" placeholder="Buscar por brinco ou filia√ß√£o" value="{{ request.GET.q }}">
        <button type="submit" class="btn btn-primary me-2">Buscar</button>

        {% if user.is_superuser %}
        <a href="{% url 'adicionar_ovino' %}" class="btn btn-success">Adicionar Ovino</a>
        {% endif %}

        <a href="{% url 'home' %}" class="btn btn-warning btn-sm me-1">P√°gina Inicial</a>
    </form>
</div>
    <!-- Cards de ovinos -->
    <div class="row">
        {% for ovino in ovinos %}
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                {% if ovino.foto %}
                <img src="{{ ovino.foto.url }}" class="card-img-top" alt="Foto do Ovino">
                {% else %}
                <img src="https://via.placeholder.com/400x300?text=Sem+Foto" class="card-img-top" alt="Sem Foto">
                {% endif %}
                <div class="card-body">
                    <h5 class="card-title">{{ ovino.numero_brinco }} - {{ ovino.raca }}</h5>
                    <p class="card-text">
                        <strong>Sexo:</strong> {{ ovino.sexo }}<br>
                        <strong>Cor:</strong> {{ ovino.cor }}<br>
                        <strong>Peso:</strong> {{ ovino.peso_atual }} kg<br>
                        <strong>Status:</strong> {{ ovino.status }}
                    </p>
                </div>
                <div class="card-footer text-center">
                    <a href="{% url 'detalhes_ovino' ovino.pk %}" class="btn btn-primary btn-sm me-1">Detalhes</a>
                    
                    {% if user.is_authenticated %}
                        <a href="{% url 'editar_ovino' ovino.pk %}" class="btn btn-warning btn-sm me-1">Editar</a>
                        <a href="{% url 'atualizar_status' ovino.pk 'Vendido' %}" class="btn btn-danger btn-sm">Vendido</a>
                    {% endif %}
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12">
            <div class="alert alert-info">Nenhum ovino encontrado.</div>
        </div>
        {% endfor %}
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
